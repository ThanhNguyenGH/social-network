<% if (!csrfToken) { %>
  <div class="alert alert-danger">
    <p>CSRF token is missing. Please refresh the page or contact support.</p>
  </div>
<% } %>
<% if (errors && errors.length > 0) { %>
  <div class="alert alert-danger">
    <% errors.forEach(error => { %>
      <p><%= error.msg %></p>
    <% }) %>
  </div>
<% } %>

<form action="/users/edit" method="POST" enctype="multipart/form-data" class="max-w-md mx-auto p-4">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>">
  
  <div class="mb-4">
    <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
    <input type="text" name="username" id="username" value="<%= user.username %>" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
  </div>
  
  <div class="mb-4">
    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
    <input type="email" name="email" id="email" value="<%= user.email %>" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
  </div>
  
  <div class="mb-4">
    <label for="bio" class="block text-sm font-medium text-gray-700">Bio</label>
    <textarea name="bio" id="bio" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm"><%= user.bio || '' %></textarea>
  </div>
  
  <div class="mb-4">
    <label for="avatar" class="block text-sm font-medium text-gray-700">Avatar</label>
    <input type="file" name="avatar" id="avatar" accept="image/jpeg,image/png" class="mt-1 block w-full">
  </div>
  
  <button type="submit" class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600">Save Changes</button>
</form>